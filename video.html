<!DOCTYPE HTML>
<html>
        <head>
                <title>PRACTICA4</title>
                <meta charset="utf-8" />
                
                <meta http-equiv="X-UA-Compatible" content="IE=edge">
                <meta name="viewport" content="width=device-width, initial-scale=1">
                <meta name="Author" content="YesicaMacias14" />
                <meta name="Description" content="Sample for HTML5" />
                <script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
                
        
                <link rel="stylesheet" type="text/css" media="screen" href="css/formato.css" />
                <script src="js/main.js"></script>
                <script>

function start(e) {
    e.dataTransfer.effecAllowed = 'move'; // Define el efecto como mover
    e.dataTransfer.setData("Data", e.target.id); // Coje el elemento que se va a mover
    e.dataTransfer.setDragImage(e.target, 0, 0); // Define la imagen que se vera al ser arrastrado el elemento y por donde se coje el elemento que se va a mover (el raton aparece en la esquina sup_izq con 0,0)
    e.target.style.opacity = '0.4'; // Establece la opacidad del elemento que se va arrastrar
}

function end(e) {
    e.target.style.opacity = ''; // Restaura la opacidad del elemento   
    e.dataTransfer.clearData("Data");
}
function over(event)
{
    var elemArrastrable = e.dataTransfer.getData("video"); //video que se esta arrastrando
    var id= e.target.id; //elemento sobre el que se esta arrastrando

    //poder soltar el elemento en el div de cuerpo
    if(id=='cuerpo')
    {
        return false; 
    }
}

function drop(e)
{
    var elemArrastrado= e.dataTransfer.getData("video");//elemento que se esta arrastrando
    e.target.appendChild(document.getElementById(elementoArrastrado)); //añade el video que se arrastro

    //dimensiones del elemento sobre el que se agrego
    xAux= $('#'+e.target.id).width();
    yAux=$('#'+e.target.id).height();

    //dimensiones del elemento arrastrado
    xelemto= $('#'+e.elemArrastrado).width();
    yelemto=$('#'+e.elemArrastrado).height();

    // Posicion del elemento sobre el que se arrastra
    posXCont = $(e.target).position().left;
    posYCont = $(e.target).position().top;

    // Posicion absoluta del raton
    x = e.layerX;
    y = e.layerY;

}
function clonar(e)
{
    var elementoArrastrado = document.getElementById(e.dataTransfer.getData("Data")); // Elemento arrastrado

    elementoArrastrado.style.opacity = ''; // Dejamos la opacidad a su estado anterior para copiar el elemento igual que era antes

    var movecarclone = elementoArrastrado.cloneNode(true); // Se clona el elemento
    movecarclone.id = "ElemClonado" + contador; // Se cambia el id porque tiene que ser unico
    contador += 1;
    elementoClonado.style.position = "static"; // Se posiciona de forma "normal" (Sino habria que cambiar las coordenadas de la posición) 
    e.target.appendChild(movecarclone); // Se añade el elemento clonado
}

function leave(e) {
    e.target.style.border = ''; 
}
                </script>
        
        </head>
        <body>
            <header>
                <h1>LA SEÑORA NESBIT</h1>
            </header>
            <nav>
                    <ul>
                        <li><a href="#">AGREGAR</a></li>
                        <li><a href="#">QUITAR</a></li>
                    </ul>
                </nav>
                <figure id="video_player">
                  <div id="cuerpo" ondrop="clonar(e);" ondragover="over(e);" ondragleave="leave(e);">
                  <video controls poster="imagenes/buzz.jpg" playsinline>
                    <source src="videos/señora-nesbit.mp4" type="video/mp4">
                    <source src="http://thenewcode.com/assets/videos/glacier.webm" type="video/webm">
                </video>
                </div>
                <figcaption id="listado">
                  <a href="videos/Beetlejuice.mp4" class="currentvid" draggable="true">
                    <img src="imagenes/b.jpg">
                  </a>
                  <a href="videos/exodia.mp4" draggable="true" ondragstart="start(e);" ondragend="end(e);">
                    <img src="imagenes/exodia.jpg">
                  </a>
                  <a href="videos/jack.mp4" draggable="true" ondragstart="start(e);">
                    <img src="imagenes/jack.jpg">
                  </a>
                  <a href="videos/pimpon.mp4" class="currentvid" draggable="true" ondragstart="start(e);" ondragend="end(e);">
                      <img src="imagenes/jengibre.jpg">
                    </a>
                    <a href="videos/pinoccio.mp4" draggable="true" ondragstart="start(e);" ondragend="end(e);">
                      <img src="imagenes/pinocchio.jpg">
                    </a>
                    <a href="videos/space.mp4"  draggable="true" ondragstart="start(e);" ondragend="end(e);">
                      <img src="imagenes/bugs.jpg">
                    </a>
                </figcaption>
                
          </figure>
                      
        </body>
</html>